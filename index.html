<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crab Simulator</title>
    <style>
        /* Basic reset to make the game full screen */
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            width: 100%;
            cursor: crosshair; /* Helps to see the cursor position */
        }

        #game-area {
            overflow: hidden;
            user-select: none;
            width: 100%;
            height: 100%;
            position: relative; /* Needed to position the 'world' inside */
            background-color: #D2B48C; /* A sand-like fallback color */
        }

        #world {
            position: absolute;
            width: 20480px; /* Increased size */
            height: 20480px; /* Increased size */
            background-image: url('assets/sand.png'); /* Placeholder */
            background-repeat: repeat;
            transform-style: preserve-3d;
            will-change: transform;
        }

        /* New overlay for light and shade with passing cloud effect */
        #light-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(
                ellipse at center,
                rgba(16, 32, 48, 0.0) 0%,
                rgba(16, 32, 48, 0.8) 70%,
                rgba(16, 32, 48, 0.8) 100%
            );
            background-size: 400% 400%; /* Large size to create a soft, wide shadow */
            pointer-events: none; /* Allows clicks to pass through */
            z-index: 200; /* Above everything except tutorial text */
            opacity: 1; /* Start dark */
            transition: opacity 5s ease-in-out; /* Smooth transition */
        }

        /* --- Seaweed Styling --- */
        .seaweed {
            position: absolute;
            width: 246px;
            height: 430px;
            background-image: url('assets/seaweed.png'); /* Placeholder */
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center bottom;
            opacity: 0.8;
            transform-origin: bottom center;
            animation: sway 6s ease-in-out infinite;
            z-index: 150; /* Set a higher z-index to appear in front of the crab */
        }

        /* --- Crab Styling --- */
        .crab { /* Changed from #crab to a class for reusability */
            position: absolute;
            width: 281px;
            height: 196px;
            z-index: 100; /* Crab is on a lower layer than the seaweed */
            transform-origin: center center;
            will-change: transform, left, top;
        }

        .crab-part {
            position: absolute;
        }

        .crab-body { /* Changed from #crab-body */
            width: 100%;
            height: 100%;
            background-image: url('assets/crab.png'); /* Placeholder */
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 10;
        }
        
        /* --- Simplified Arm Styling (Debug Placeholders) --- */
        .arm {
            width: 57px;
            height: 82px;
            transform-origin: top center;
            top: 170px;
            z-index: 5; 
        }

        .right-arm { /* Changed from #right-arm */
            background-image: url('assets/rightarm.png');
            background-size: contain;
            background-repeat: no-repeat;
            left: 25px;
        }
        
        .left-arm { /* Fix: Corrected the left position */
            background-image: url('assets/leftarm.png');
            background-size: contain;
            background-repeat: no-repeat;
            left: 200px;
        }
       
        .right-claw { /* Changed from #right-claw */
            width: 197px;
            height: 77px;
            background-image: url('assets/rightopen.png');
            background-size: contain;
            background-repeat: no-repeat;
            transform-origin: top left; /* Pivot from corner */
            top: 82px; /* Positioned at the bottom of the arm */
            left: calc(57px